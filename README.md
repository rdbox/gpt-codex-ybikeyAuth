# claude-webauth

Утилита `api_diagnostic.py` выполняет детальную проверку работоспособности API OpenAI GPT и Google Gemini. Скрипт поддерживает одиночные ключи и списки ключей, автоматически определяет тип ключа по префиксу и выводит подробный отчет по каждому шагу.

<<<<<<< HEAD
## Быстрый старт
1. Убедитесь, что установлен Python 3 и доступен модуль `requests` (при необходимости установите `pip install requests`).
2. Сохраните или скопируйте ваши ключи OpenAI (начинаются с `sk-` или `sk-proj-`) и Gemini (начинаются с `AIza`).
3. Запустите скрипт в терминале:
   ```bash
   python3 api_diagnostic.py sk-ваш_openai AIzaSy_ваш_gemini
   ```
   Ключи можно передавать в любом порядке — скрипт сам определит тип по префиксу.

## Режимы запуска
### 1) Позиционные ключи (автоопределение)
- Один OpenAI и один Gemini ключ: `python3 api_diagnostic.py sk-xxx AIzaSy-yyy`
- Только OpenAI ключи: `python3 api_diagnostic.py sk-xxx sk-yyy`
- Только Gemini ключи: `python3 api_diagnostic.py AIzaSy-xxx AIzaSy-yyy`

### 2) Явное указание провайдера
Используйте флаги `--openai` / `--gemini` для явного разделения ключей:
- `python3 api_diagnostic.py --openai sk-xxx sk-yyy --gemini AIzaSy1 AIzaSy2`

### 3) Пропуск определения IP
Чтобы не отправлять запрос на определение IP/географии, добавьте флаг:
- `python3 api_diagnostic.py --skip-ip-check sk-xxx`

### 4) Тестовый GET-запрос Gemini
Для проверки конкретного GET-эндпойнта Gemini передайте `--gemini-get-url`. Используется первый Gemini ключ из списка:
- `python3 api_diagnostic.py --gemini AIzaSyExample --gemini-get-url models/gemini-pro`

## Что делает скрипт
1. **Определение IP (опционально)** — выводит текущий IP, страну, город и провайдера (если не указан `--skip-ip-check`).
2. **Проверка OpenAI** — для каждого ключа по очереди:
   - Доступность `https://api.openai.com/v1/models` и валидность ключа.
   - Получение списка моделей.
   - Тестовый чат-запрос к `gpt-3.5-turbo` и вывод времени/токенов.
3. **Проверка Gemini** — для каждого ключа либо выполняется стандартный тест запроса `gemini-pro:generateContent`, либо единственный пользовательский GET-запрос, если указан `--gemini-get-url`.
4. **Итоговый отчет** — сводка по каждому ключу и общий итог (успех/ошибка/пропуск).

## Как читать вывод
- Зеленые строки `✅` — шаг выполнен успешно, ключ рабочий.
- Красные строки `❌` — ошибка (неверный ключ, блокировка IP, проблемы сети или эндпойнта).
- Желтые строки `⚠️` — предупреждения, пропуски или невозможность определить тип ключа.
- Финальный баннер показывает, прошли ли оба провайдера без ошибок.

## Полезные советы
- Если ключ не распознан по префиксу, он по умолчанию попадет в список OpenAI (об этом будет предупреждение). Используйте флаги `--openai` / `--gemini`, чтобы указать явно.
- При проверке нескольких ключей вывод для каждого ключа группируется отдельным заголовком `OPENAI КЛЮЧ X/Y` или `GEMINI КЛЮЧ X/Y`.
- При использовании `--gemini-get-url` стандартные запросы Gemini пропускаются; выполняется только указанный GET для первого Gemini ключа.
=======
## Быстрый старт
1. Убедитесь, что установлен Python 3 и доступен модуль `requests` (при необходимости установите `pip install requests`).
2. Сохраните или скопируйте ваши ключи OpenAI (начинаются с `sk-` или `sk-proj-`) и Gemini (начинаются с `AIza`).
3. Запустите скрипт в терминале:
   ```bash
   python3 api_diagnostic.py sk-ваш_openai AIzaSy_ваш_gemini
   ```
   Ключи можно передавать в любом порядке — скрипт сам определит тип по префиксу.

## Режимы запуска
### 1) Позиционные ключи (автоопределение)
- Один OpenAI и один Gemini ключ: `python3 api_diagnostic.py sk-xxx AIzaSy-yyy`
- Только OpenAI ключи: `python3 api_diagnostic.py sk-xxx sk-yyy`
- Только Gemini ключи: `python3 api_diagnostic.py AIzaSy-xxx AIzaSy-yyy`

### 2) Явное указание провайдера
Используйте флаги `--openai` / `--gemini` для явного разделения ключей:
- `python3 api_diagnostic.py --openai sk-xxx sk-yyy --gemini AIzaSy1 AIzaSy2`

### 3) Пропуск определения IP
Чтобы не отправлять запрос на определение IP/географии, добавьте флаг:
- `python3 api_diagnostic.py --skip-ip-check sk-xxx`

### 4) Тестовый GET-запрос Gemini
Для проверки конкретного GET-эндпойнта Gemini передайте `--gemini-get-url`. Используется первый Gemini ключ из списка:
- `python3 api_diagnostic.py --gemini AIzaSyExample --gemini-get-url models/gemini-pro`

## Что делает скрипт
1. **Определение IP (опционально)** — выводит текущий IP, страну, город и провайдера (если не указан `--skip-ip-check`).
2. **Проверка OpenAI** — для каждого ключа по очереди:
   - Доступность `https://api.openai.com/v1/models` и валидность ключа.
   - Получение списка моделей.
   - Тестовый чат-запрос к `gpt-3.5-turbo` и вывод времени/токенов.
3. **Проверка Gemini** — для каждого ключа либо выполняется стандартный тест запроса `gemini-pro:generateContent`, либо единственный пользовательский GET-запрос, если указан `--gemini-get-url`.
4. **Итоговый отчет** — сводка по каждому ключу и общий итог (успех/ошибка/пропуск).

## Как читать вывод
- Зеленые строки `✅` — шаг выполнен успешно, ключ рабочий.
- Красные строки `❌` — ошибка (неверный ключ, блокировка IP, проблемы сети или эндпойнта).
- Желтые строки `⚠️` — предупреждения, пропуски или невозможность определить тип ключа.
- Финальный баннер показывает, прошли ли оба провайдера без ошибок.

## Полезные советы
- Если ключ не распознан по префиксу, он по умолчанию попадет в список OpenAI (об этом будет предупреждение). Используйте флаги `--openai` / `--gemini`, чтобы указать явно.
- При проверке нескольких ключей вывод для каждого ключа группируется отдельным заголовком `OPENAI КЛЮЧ X/Y` или `GEMINI КЛЮЧ X/Y`.
- При использовании `--gemini-get-url` стандартные запросы Gemini пропускаются; выполняется только указанный GET для первого Gemini ключа.
>>>>>>> 1602a75 (Add detailed usage instructions)
